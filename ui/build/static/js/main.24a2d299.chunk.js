(this["webpackJsonpmusic-dash"]=this["webpackJsonpmusic-dash"]||[]).push([[0],{38:function(e,t,c){},67:function(e,t,c){"use strict";c.r(t);var s=c(1),a=c.n(s),n=c(32),r=c.n(n),i=(c(38),"/api"),l=c(11),o=c.n(l),j=c.p+"static/media/personal_dj_logo.5b25a09b.png",u=c(0),b=function(){return Object(u.jsx)("section",{children:Object(u.jsx)("div",{className:"container w-100",children:Object(u.jsxs)("div",{className:"my-5 justify-content-center text-center",children:[Object(u.jsxs)("div",{className:"text-center",children:[Object(u.jsx)("img",{src:j,className:"col-1",alt:"Personal DJ Logo of a green music element in a circle"}),Object(u.jsx)("h1",{className:"",children:"Personal DJ"})]}),Object(u.jsx)("p",{children:"We use Spotify's secure login to connect to your account. We never see your email or password, nor do we care to. We just want to find you some good music."}),Object(u.jsx)("button",{onClick:function(){o.a.get(i+"/login").then((function(e){window.location.href=e.data}))},type:"button",className:"btn btn-primary login-btn col-sm-12 col-lg-6",children:"Login with Spotify"})]})})})},m=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,68)).then((function(t){var c=t.getCLS,s=t.getFID,a=t.getFCP,n=t.getLCP,r=t.getTTFB;c(e),s(e),a(e),n(e),r(e)}))},d=c.p+"static/media/8-bit-heart.663f7e33.png",h=function(){return Object(u.jsxs)("footer",{className:"text-center my-5",children:[Object(u.jsx)("hr",{}),Object(u.jsxs)("p",{children:["Made with",Object(u.jsx)("img",{className:"mx-1",width:"20px",src:d,alt:"8 bit heart logo"})," by",Object(u.jsx)("a",{href:"https://github.com/RyanRussell00/personal-dj/blob/master/CONTRIBUTORS.md",target:"_blank",rel:"noreferrer",className:"mx-1",children:"Our Contributors"})]}),Object(u.jsxs)("p",{children:["This is an open source project.",Object(u.jsx)("a",{href:"https://github.com/RyanRussell00/personal-dj",className:"mx-1",children:"Contribute now!"})]}),Object(u.jsx)("small",{children:"Version 2.0 -- Now with extra cheese!"})]})},O=c(21),p=c(4),x=c(3),f=c(5),g=c(17),y=c(18),N=c.n(y),k="personal_dj_token",v=function(){return N.a.get(k)},w=function(){N.a.remove(k)},S=function(e){var t=e.searchResults,c=e.setCurrentSelected,a=Object(s.useState)(""),n=Object(f.a)(a,2),r=n[0],i=n[1];return Object(u.jsx)(u.Fragment,{children:function(){var e=[];return t.forEach((function(t,c){e.push(t)})),e}().map((function(e){return Object(u.jsx)("div",{className:"col-lg col-sm-3 m-1",children:Object(u.jsxs)("div",{className:"card shadow track my-2 d-block "+(r==e.trackId?"selected-track":""),id:e.trackId,onClick:function(){return s=e.trackId,c(t.get(s)),void i(s);var s},children:[Object(u.jsx)("img",{className:"card-img-top",src:e.imgUrl}),Object(u.jsxs)("p",{className:"card-title py-2",children:[e.title,Object(u.jsx)("br",{}),Object(u.jsxs)("i",{children:["by ",e.artistName]})]})]})})}))})};function P(e){var t=/\\([\s\S])|(")/g;return"Title Not Found"!=e&&e.match(t)?e.replace(t,"&quot;"):e}var R=function(e){console.error(e),e&&e.message?e.message.includes("401")?(alert("Session expired. Please login again."),w(),window.location.href="/"):alert("Unknown error. Please try again. If issue continues, refresh your browser."):alert("Unknown error. Please try refreshing your browser.")},C=function(e){var t=[];return e.forEach((function(e){t.push(e.trackId)})),t},F=c.p+"static/media/loader.bf1608ac.svg",M=function(e){var t=e.show;return Object(u.jsx)(u.Fragment,{children:t?Object(u.jsx)("img",{src:F,className:"m-5"}):Object(u.jsx)(u.Fragment,{})})},I=function(e){var t=e.setSelected,c=Object(g.a)(),a=c.register,n=c.handleSubmit,r=c.watch,l=Object(s.useState)(new Map),j=Object(f.a)(l,2),b=j[0],m=j[1],d=Object(s.useRef)(-1),h=Object(s.useState)(!1),O=Object(f.a)(h,2),p=O[0],y=O[1],N=r("trackName"),k=function(){y(!0),o.a.get(i+"/trackSearch",{params:{track_value:N,searchOffset:d.current,token:v()}}).then((function(e){m(function(e){var t=new Map;try{for(var c=e.data.trackResult.tracks.items,s=0;s<c.length;s++){var a=c[s].album.images[0].url||"https://www.publicdomainpictures.net/pictures/280000/velka/not-found-image-15383864787lu.jpg",n=P(c[s].name||"Title Not Found"),r=c[s].artists[0].name||"Artist Not Found",i=c[s].id;t.set(i,{trackId:i,title:n,imgUrl:a,artistName:r})}}catch(l){console.error("Failed to convert track result response to model",l),R({message:"401"})}return t}(e))})).catch((function(e){R(e)})).finally((function(){return y(!1)}))};return Object(u.jsxs)("form",{onSubmit:n((function(){d.current=0,k()})),className:"container",children:[Object(u.jsx)("h1",{children:"Step 1: Pick a seed song"}),Object(u.jsx)("input",Object(x.a)(Object(x.a)({},a("trackName")),{},{placeholder:"Search for a track",className:"w-50",required:!0})),Object(u.jsx)("br",{}),Object(u.jsx)("button",{className:"my-2 px-5 btn btn-success",type:"submit",children:"Search"}),Object(u.jsx)(M,{show:p}),Object(u.jsx)("div",{className:"search-results p-2",children:Object(u.jsx)(S,{searchResults:b,setCurrentSelected:t})}),b.size>0?Object(u.jsx)("div",{className:"my-4",children:Object(u.jsxs)("ul",{className:"list-inline",children:[Object(u.jsx)("li",{className:"list-inline-item",onClick:function(){d.current=Math.max(0,d.current-5),k()},children:Object(u.jsx)("a",{className:"btn btn-success text-white",children:" < Last 5 "})}),Object(u.jsx)("li",{className:"list-inline-item",onClick:function(){d.current=d.current+5,k()},children:Object(u.jsx)("a",{className:"btn btn-success text-white",children:"Next 5 >"})})]})}):d.current>=0&&!p?Object(u.jsx)("h3",{className:"my-3 text-white",children:"No tracks found"}):Object(u.jsx)(u.Fragment,{})]})},T=function(e){var t=e.setParameters,c=Object(g.a)(),a=c.register,n=c.handleSubmit,r=c.watch,i=c.reset,l=(c.formState.errors,Object(s.useRef)({acoustic:-1,BPM:-1,danceable:-1,hype:-1,instrumental:-1,numOfSongs:-1,popular:-1,positiveness:-1,vocal:-1}));l.current={acoustic:r("acoustic"),BPM:r("BPM"),danceable:r("danceable"),hype:r("hype"),instrumental:r("instrumental"),numOfSongs:r("numOfSongs"),popular:r("popular"),positiveness:r("positiveness"),vocal:r("vocal")};return Object(u.jsxs)("form",{onSubmit:n((function(){t(l.current)})),className:"container",children:[Object(u.jsx)("hr",{}),Object(u.jsx)("h1",{children:"Step 2: Fine tune your playlist"}),Object(u.jsxs)("p",{children:["All inputs below are ",Object(u.jsx)("b",{children:"OPTIONAL."})," ",Object(u.jsx)("br",{}),"Leave blank to not set."]}),Object(u.jsx)("button",{onClick:function(){i()},className:"btn btn-danger",type:"button",children:"Reset All Parameters"}),Object(u.jsxs)("div",{className:"row row-cols-2 g-2 g-lg-3",children:[Object(u.jsxs)("div",{className:"col",children:[Object(u.jsx)("label",{children:"How acoustic do you want the tracks? (0 to 10)"}),Object(u.jsx)("input",Object(x.a)(Object(x.a)({},a("acoustic")),{},{placeholder:"Acousticness",type:"number",min:0,max:10,step:1,className:"form-control mb-3"})),Object(u.jsx)("label",{children:"What BPM (beats per minute) do you want? (0 to 1000)"}),Object(u.jsx)("input",Object(x.a)(Object(x.a)({},a("BPM")),{},{placeholder:"Beats Per Minute (BPM)",type:"number",min:0,max:1e3,step:1,className:"form-control mb-3"})),Object(u.jsx)("label",{children:"How danceable do you want the tracks? (0 to 10)"}),Object(u.jsx)("input",Object(x.a)(Object(x.a)({},a("danceable")),{},{placeholder:"Dance yo butt off",className:"form-control mb-3"})),Object(u.jsx)("label",{children:"How positive (emotionally) do you want the tracks? (0 to 10)"}),Object(u.jsx)("input",Object(x.a)(Object(x.a)({},a("positiveness")),{},{placeholder:"Make me feel good",type:"number",min:0,max:10,step:1,className:"form-control mb-3"}))]}),Object(u.jsxs)("div",{className:"col",children:[Object(u.jsx)("label",{children:"How Hype do you want the tracks? (0 to 10)"}),Object(u.jsx)("input",Object(x.a)(Object(x.a)({},a("hype")),{},{placeholder:"H Y P E",type:"number",min:0,max:10,step:1,className:"form-control mb-3"})),Object(u.jsx)("label",{children:"How Instrumental do you want the tracks? (0 to 10)"}),Object(u.jsx)("input",Object(x.a)(Object(x.a)({},a("instrumental")),{},{placeholder:"Less talk, more music",type:"number",min:0,max:10,step:1,className:"form-control mb-3"})),Object(u.jsx)("label",{children:"How popular do you want the tracks? (0 to 100)"}),Object(u.jsx)("input",Object(x.a)(Object(x.a)({},a("popular")),{},{placeholder:"Mo' popular",className:"form-control mb-3"})),Object(u.jsx)("label",{children:"How vocal do you want the tracks? (0 to 10)"}),Object(u.jsx)("input",Object(x.a)(Object(x.a)({},a("vocal")),{},{placeholder:"More talk, less music",type:"number",min:0,max:10,step:1,className:"form-control mb-3"}))]})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("div",{className:"",children:[Object(u.jsxs)("label",{children:[Object(u.jsx)("b",{children:"(Required)"})," How many songs do you want? (1 to 50)"]}),Object(u.jsx)("br",{}),Object(u.jsx)("input",Object(x.a)(Object(x.a)({},a("numOfSongs")),{},{placeholder:"# of songs",type:"number",min:1,max:50,step:1,className:"p-2",required:!0}))]}),Object(u.jsx)("button",{className:"my-3 px-5 btn btn-success",type:"submit",children:"Create Playlist"})]})},B=function(e){var t=e.selectedTrack,c=e.parameters,a=Object(s.useRef)([]),n=Object(s.useRef)([]),r=Object(s.useState)([]),l=Object(f.a)(r,2),j=l[0],b=l[1],m=Object(s.useRef)(!1),d=Object(s.useRef)(!1),h=Object(s.useRef)(!1),O=Object(s.useState)(!1),p=Object(f.a)(O,2),x=p[0],g=p[1];Object(s.useEffect)((function(){g(!0),m.current=!1,d.current=!1,h.current=!1,o.a.get(i+"/recommendations",{params:{token:v(),seed_tracks:t.trackId,limit:c.numOfSongs,danceability:c.danceable/10,energy:c.hype/10,popular:c.popular,acousticness:c.acoustic,speechiness:c.vocal,instrumentalness:c.instrumental,tempo:c.BPM,valence:c.positiveness}}).then((function(e){var t=function(e){var t=[],c=[];try{if(!e)return[[],[]];for(var s=e.data.trackResult,a=0;a<s.tracks.length;a++){var n=s.tracks[a],r={trackId:n.id,title:n.name,imgUrl:n.album.images[0].url,artistName:n.artists[0].name,explicit:n.explicit};t.push(r),r.explicit||c.push(r)}}catch(i){console.error("Failed to convert recommendations to model"),R({message:"401"})}return[t,c]}(e),c=Object(f.a)(t,2);a.current=c[0],n.current=c[1],b(a.current)})).catch((function(e){return R(e)})).finally((function(){return g(!1)}))}),[c]);var y=function(){if((g(!0),m.current&&d.current||!m.current&&h.current)&&!window.confirm("This playlist already created do you want to create duplicate playlist?"))return void g(!1);o.a.get(i+"/createPlaylist",{params:{token:v(),seed_track:t,playlist_params:c}}).then((function(e){o.a.get(i+"/addTracks",{params:{track_list:C(j),playlist_id:e.data.data,token:v()}}).then((function(e){alert("Playlist saved!"),m.current?d.current=!0:h.current=!0})).catch((function(e){R(e)}))})).catch((function(e){R(e)})).finally((function(){return g(!1)}))};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(M,{show:x}),Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{className:"btn btn-success text-white my-3 p-4",onClick:y,children:"Save as a Playlist"}),Object(u.jsx)("form",{children:Object(u.jsxs)("div",{className:"custom-control custom-checkbox mb-3",children:[Object(u.jsx)("input",{type:"checkbox",className:"custom-control-input",checked:m.current,onChange:function(e){m.current=!m.current,e.target.checked?b(n.current):b(a.current)}}),Object(u.jsx)("label",{className:"custom-control-label mx-1",children:"Remove Explicit Tracks"})]})})]}),!x&&Object(u.jsxs)("div",{className:"search-results",children:[Object(u.jsxs)("h2",{children:[j.length," tracks found"]}),j.map((function(e){return Object(u.jsx)("div",{className:"col-lg col-sm-3 m-1",children:Object(u.jsxs)("div",{className:"card shadow track my-2 d-block",children:[Object(u.jsx)("img",{className:"card-img-top",src:e.imgUrl}),Object(u.jsxs)("p",{className:"card-title py-2",children:[e.title,Object(u.jsx)("br",{}),Object(u.jsxs)("i",{children:["by ",e.artistName]}),Object(u.jsx)("br",{}),Object(u.jsx)("i",{children:e.explicit?"Explicit":"Non-Explicit"})]})]})})}))]}),Object(u.jsx)("div",{className:"text-center",children:Object(u.jsx)("button",{className:"btn btn-success text-white my-3 p-4",onClick:y,children:"Save as a Playlist"})})]})},_=function(){var e=Object(s.useState)(),t=Object(f.a)(e,2),c=t[0],a=t[1],n=Object(s.useState)(),r=Object(f.a)(n,2),i=r[0],l=r[1],o=Object(p.f)(),b=new URLSearchParams(window.location.search).get("token");Object(s.useEffect)((function(){var e;b?(e=b,w(),N.a.set(k,e),window.location.search=""):v()||(w(),o.push("/"))}));return Object(u.jsxs)("div",{className:"container text-center my-3",children:[Object(u.jsx)("img",{src:j,className:"img-fluid col-lg-2 col-1"}),Object(u.jsx)("hr",{}),Object(u.jsx)(I,{setSelected:a}),c?Object(u.jsx)(T,{setParameters:function(e){l(e)}}):Object(u.jsx)(u.Fragment,{}),c&&i?Object(u.jsx)(B,{parameters:i,selectedTrack:c}):Object(u.jsx)(u.Fragment,{})]})};r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsxs)(O.a,{children:[Object(u.jsxs)(p.c,{children:[Object(u.jsx)(p.a,{path:"/",exact:!0,children:Object(u.jsx)(b,{})}),Object(u.jsx)(p.a,{path:"/dashboard",exact:!0,children:Object(u.jsx)(_,{})})]}),Object(u.jsx)(h,{})]})}),document.getElementById("root")),m()}},[[67,1,2]]]);
//# sourceMappingURL=main.24a2d299.chunk.js.map