(this["webpackJsonpmusic-dash"]=this["webpackJsonpmusic-dash"]||[]).push([[0],{32:function(e,t,c){},60:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c.n(s),a=c(26),r=c.n(a),i=(c(32),"/api"),l=c(9),o=c.n(l),j=c.p+"static/media/personal_dj_logo.5b25a09b.png",u=c(0),b=function(){return Object(u.jsx)("section",{children:Object(u.jsx)("div",{className:"container w-100",children:Object(u.jsxs)("div",{className:"my-5 justify-content-center text-center",children:[Object(u.jsxs)("div",{className:"text-center",children:[Object(u.jsx)("img",{src:j,className:"col-1"}),Object(u.jsx)("h1",{className:"",children:"Personal DJ"})]}),Object(u.jsx)("p",{children:"We use Spotify's secure login to connect to your account. We never see your email or password, nor do we care to. We just want to find you some good music."}),Object(u.jsx)("button",{onClick:function(){o.a.get(i+"/login").then((function(e){window.location.href=e.data}))},type:"button",className:"btn btn-primary login-btn col-sm-12 col-lg-6",children:"Login with Spotify"})]})})})},m=c(2),d=c(3),h=c(12),O=c.n(h),x=function(e){var t=e.trackId,c=e.title,s=e.imgUrl,n=e.artistName,a=e.isSelected,r=e.onClick,i=e.showSelected;return Object(u.jsx)("div",{className:"col-lg col-sm-3 m-1",children:Object(u.jsxs)("div",{className:"card shadow track my-2 d-block "+(a&&i?"selected-track":""),name:c,id:t,onClick:function(){return r(t)},children:[Object(u.jsx)("img",{className:"card-img-top",src:s}),Object(u.jsxs)("p",{className:"card-title py-2",children:[c,Object(u.jsx)("br",{}),Object(u.jsxs)("i",{children:["by ",n]})]})]})})},p=function(e){var t=e.searchResults,c=e.setCurrentSelected,n=Object(s.useState)(null),a=Object(m.a)(n,2),r=a[0],i=a[1],l=function(e){i(e),null!=c&&c(e)};return Object(u.jsx)(u.Fragment,{children:t.map((function(e){return Object(u.jsx)(x,{trackId:e.id,title:e.title,imgUrl:e.imgUrl,artistName:e.artist,isSelected:r===e.id,onClick:l,showSelected:null!=c},e.id)}))})},f=c.p+"static/media/loader.bf1608ac.svg",g=function(e){var t=e.show;return Object(u.jsx)(u.Fragment,{children:t?Object(u.jsx)("img",{src:f,className:"m-5"}):Object(u.jsx)(u.Fragment,{})})},N="personal_dj_token",v=function(){return O.a.get(N)},y=function(){O.a.remove(N)},w=function(e){console.error(e),e&&e.message?e.message.includes("401")?(alert("Session expired. Please refresh your browser."),y()):alert("Unkown error. Please try again. If issue continues, refresh your browser."):alert("Unknown error. Please try refreshing your browser.")},k=function(e){var t=e.seedIds,c=e.token,n=Object(s.useState)(!1),a=Object(m.a)(n,2),r=a[0],l=a[1],j=Object(s.useState)(""),b=Object(m.a)(j,2),d=b[0],h=b[1],O=Object(s.useState)(""),x=Object(m.a)(O,2),f=x[0],N=x[1],v=Object(s.useState)(""),y=Object(m.a)(v,2),k=y[0],S=y[1],C=Object(s.useState)(""),P=Object(m.a)(C,2),R=P[0],T=P[1],F=Object(s.useState)(""),I=Object(m.a)(F,2),L=I[0],M=I[1],U=Object(s.useState)(""),A=Object(m.a)(U,2),H=A[0],_=A[1],D=Object(s.useState)(""),q=Object(m.a)(D,2),B=q[0],E=q[1],V=Object(s.useState)(""),W=Object(m.a)(V,2),Y=W[0],G=W[1],J=Object(s.useState)(""),z=Object(m.a)(J,2),K=z[0],Q=z[1],X=Object(s.useState)([]),Z=Object(m.a)(X,2),$=Z[0],ee=Z[1],te=Object(s.useState)([]),ce=Object(m.a)(te,2),se=ce[0],ne=ce[1],ae=Object(s.useState)(!1),re=Object(m.a)(ae,2),ie=re[0],le=re[1],oe=Object(s.useState)(!1),je=Object(m.a)(oe,2),ue=je[0],be=je[1],me=Object(s.useState)(!1),de=Object(m.a)(me,2),he=de[0],Oe=de[1],xe=Object(s.useState)(!1),pe=Object(m.a)(xe,2),fe=pe[0],ge=pe[1],Ne=Object(s.useState)(),ve=Object(m.a)(Ne,2),ye=ve[0],we=ve[1],ke=function(){be(!1),Oe(!1),ee([]),ne([]),ge(!1)},Se=function(){return!(fe&&!he||!ue&&!fe)},Ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||e==={}||e.length<1)return ee([]),void ne([]);le(!0);for(var c=[],s=[],n=0;n<e.tracks.length;n++){var a=e.tracks[n];if(!t||!a.explicit){var r={id:a.id,title:a.name,imgUrl:a.album.images[0].url,artist:a.artists[0].name,explicit:a.explicit};s.push(r.id),c.push(r)}}ee(c),ne(s),le(!1)};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("form",{className:"form-group",onSubmit:function(e){e.preventDefault(),le(!0),ke(),o.a.get(i+"/recommendations",{params:{token:c,seed_tracks:t,danceability:d/10,energy:f/10,popular:k,limit:R,acousticness:L,speechiness:H,instrumentalness:B,tempo:Y,valence:K}}).then((function(e){Ce(e.data.trackResult),we(e.data.trackResult)})).catch((function(e){console.error("ERROR: /api/recommendations : ",e),w(e)})).finally((function(){return le(!1)}))},children:[Object(u.jsx)("h5",{children:"Fine tune your recommendations"}),Object(u.jsxs)("label",{children:["How ",Object(u.jsx)("i",{children:"danceable"})," do you want the recommendations? (0 to 10)"]}),Object(u.jsx)("div",{className:"input-group",children:Object(u.jsx)("input",{type:"number",min:"0",max:"10",step:"1",id:"danceability",className:"form-control col-sm-2",value:d,onChange:function(e){return h(e.target.value)},required:!0})}),Object(u.jsxs)("small",{className:"form-text text-muted",children:["0 = Funeral Music ",Object(u.jsx)("br",{}),"10 = Mardi Gras"]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{children:["How ",Object(u.jsx)("i",{children:"H Y P E"})," do you want the recommendations? (0 to 10)"]}),Object(u.jsx)("div",{className:"input-group",children:Object(u.jsx)("input",{type:"number",min:"0",max:"10",step:"1",id:"energy",className:"form-control col-sm-2",value:f,onChange:function(e){return N(e.target.value)},required:!0})}),Object(u.jsxs)("small",{className:"form-text text-muted",children:["0 = Beethoven ",Object(u.jsx)("br",{}),"10 = Downing 6 cans of Redbull in one sitting"]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{children:["How ",Object(u.jsx)("i",{children:"popular"})," do you want the recommendations? (0 to 100)"]}),Object(u.jsx)("div",{className:"input-group",children:Object(u.jsx)("input",{type:"number",min:"0",max:"100",step:"1",id:"popular",className:"form-control col-sm-2",value:k,onChange:function(e){return S(e.target.value)},required:!0})}),Object(u.jsxs)("small",{className:"form-text text-muted",children:["0 = Literally never heard before ",Object(u.jsx)("br",{}),"100 = Your grandma knows the song cause she heard it on the radio 43 times"]}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{children:"How many songs do you want? (1 to 50)"}),Object(u.jsx)("div",{className:"input-group",children:Object(u.jsx)("input",{type:"number",min:"1",max:"50",step:"1",id:"limit",className:"form-control col-sm-2",value:R,onChange:function(e){return T(e.target.value)},required:!0})}),Object(u.jsxs)("div",{className:"col-sm-12 my-5",children:[Object(u.jsxs)("h4",{children:[Object(u.jsx)("span",{className:"text-",children:"[OPTIONAL] "}),"Do you want to fine-tune with more inputs?"]}),Object(u.jsxs)("div",{className:"",children:[Object(u.jsx)("button",{type:"button",className:"btn btn-success m-1",onClick:function(){return l(!0)},children:"Yes plz gimme control"}),Object(u.jsx)("button",{type:"button",className:"btn btn-warning m-1 my-2",onClick:function(){return l(!1)},children:"nah"})]})]}),Object(u.jsxs)("div",{style:{display:r?"block":"none"},children:[Object(u.jsx)("h4",{children:"All the inputs below are OPTIONAL. Read the text below the input for a description of what they do."}),Object(u.jsxs)("label",{className:"mt-2",children:[Object(u.jsx)("span",{className:"text-muted",children:"[OPTIONAL] "}),"How acoustic do you want the track? (0 to 10)"]}),Object(u.jsx)("div",{className:"input-group",children:Object(u.jsx)("input",{type:"number",min:"0",max:"10",step:"1",id:"acousticness",className:"form-control col-sm-2",value:L,onChange:function(e){return M(e.target.value)}})}),Object(u.jsxs)("small",{className:"form-text text-muted",children:["0 = 0% Confidence that track is acoustic",Object(u.jsx)("br",{}),"10 = 100% Confidence that track is acoustic"]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{className:"mt-2",children:[Object(u.jsx)("span",{className:"text-muted",children:"[OPTIONAL] "}),"How vocal do you want the tracks? (0 to 10)"]}),Object(u.jsx)("div",{className:"input-group",children:Object(u.jsx)("input",{type:"number",min:"0",max:"10",step:"1",id:"speechiness",className:"form-control col-sm-2",value:H,onChange:function(e){return _(e.target.value)}})}),Object(u.jsxs)("small",{className:"form-text text-muted",children:["Value less than 3 = Music and other non-speech-like tracks",Object(u.jsx)("br",{}),"Value between 3 and 6 = Music and speech such as rap music ",Object(u.jsx)("br",{}),"Value greater than 6 = Talk-show, audio-book, poetry"]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{className:"mt-2",children:[Object(u.jsx)("span",{className:"text-muted",children:"[OPTIONAL] "}),"How instrumental do you want the tracks? (0 to 10)"]}),Object(u.jsx)("div",{className:"input-group",children:Object(u.jsx)("input",{type:"number",min:"0",max:"10",step:"1",id:"instrumentalness",className:"form-control col-sm-2",value:B,onChange:function(e){return E(e.target.value)}})}),Object(u.jsxs)("small",{className:"form-text text-muted",children:["Under 5 = Less instrumental ",Object(u.jsx)("br",{}),"Greater than 5 = More instrumental"]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{className:"mt-2",children:[Object(u.jsx)("span",{className:"text-muted",children:"[OPTIONAL] "}),"What BPM (beats per minute) do you want? (0 to 1000)"]}),Object(u.jsx)("div",{className:"input-group",children:Object(u.jsx)("input",{type:"number",min:"0",max:"1000",step:"1",id:"tempo",className:"form-control col-sm-2",value:Y,onChange:function(e){return G(e.target.value)}})}),Object(u.jsx)("small",{className:"form-text text-muted",children:"Enter BPM as a number between 0 and 1,000"}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{className:"mt-2",children:[Object(u.jsx)("span",{className:"text-muted",children:"[OPTIONAL] "}),"How much musical positiveness should the tracks have? (0 to 10)"]}),Object(u.jsx)("div",{className:"input-group",children:Object(u.jsx)("input",{type:"number",min:"0",max:"10",step:"1",id:"valence",className:"form-control col-sm-2",value:K,onChange:function(e){return Q(e.target.value)}})}),Object(u.jsxs)("small",{className:"form-text text-muted",children:["0 = Negative (sad, depressed, angry) ",Object(u.jsx)("br",{}),"10 = Positive (happy, cheerful, euphoric)"]}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{type:"button",className:"btn btn-warning m-2 mb-4",onClick:function(){return l(!1)},children:"Cancel Optional Inputs"}),Object(u.jsx)("hr",{})]}),Object(u.jsx)("button",{className:"btn btn-success text-white",type:"submit",children:"Get Recommendations"})]}),null!=ye&&Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{className:"btn btn-success text-white my-3 p-4",onClick:function(){if((le(!0),Se())&&!window.confirm("This playlist already created do you want to create duplicate playlist?"))return void le(!1);o.a.get(i+"/createPlaylist",{params:{token:c}}).then((function(e){o.a.get(i+"/addTracks",{params:{track_list:se,playlist_id:e.data.data,token:c}}).then((function(e){alert("Playlist saved!"),fe?Oe(!0):be(!0)})).catch((function(e){w(e)}))})).catch((function(e){w(e)})).finally((function(){return le(!1)}))},children:"Save as a Playlist"}),Object(u.jsx)("form",{children:Object(u.jsxs)("div",{className:"custom-control custom-checkbox mb-3",children:[Object(u.jsx)("input",{type:"checkbox",className:"custom-control-input",checked:fe,onChange:function(e){Ce(ye,e.target.checked),ge(e.target.checked)}}),Object(u.jsx)("label",{className:"custom-control-label mx-1",children:"Filter explicit content"})]})})]}),Object(u.jsx)("div",{children:se.length+" tracks found"}),Object(u.jsx)(g,{show:ie}),Object(u.jsx)("div",{className:"search-results",children:!ie&&Object(u.jsx)(p,{searchResults:$,setCurrentSelected:null})})]})},S=function(e){var t=e.token,c=e.setSelected,n=Object(s.useState)(""),a=Object(m.a)(n,2),r=a[0],l=a[1],j=Object(s.useState)(5),b=Object(m.a)(j,2),d=b[0],h=b[1],O=Object(s.useState)(!1),x=Object(m.a)(O,2),f=x[0],N=x[1],v=Object(s.useState)([]),y=Object(m.a)(v,2),k=y[0],S=y[1],C=Object(s.useState)(!1),P=Object(m.a)(C,2),R=P[0],T=P[1];function F(e){e&&e.preventDefault(),T(!0),S([]),c(null),o.a.get(i+"/trackSearch",{params:{track_value:r,searchOffset:d,token:t}}).then((function(e){!function(e){for(var t=[],c=0;c<e.length;c++){var s=e[c].album.images[0].url||"https://www.publicdomainpictures.net/pictures/280000/velka/not-found-image-15383864787lu.jpg",n=I(e[c].name||"Title Not Found"),a=e[c].artists[0].name||"Artist Not Found",r=e[c].id||null;t.push({title:n,id:r,artist:a,imgUrl:s})}S(t),N(!0)}(e.data.trackResult.tracks.items)})).catch((function(e){w(e)})).finally((function(){return T(!1)}))}function I(e){var t=/\\([\s\S])|(")/g;return"Title Not Found"!=e&&e.match(t)?e.replace(t,"&quot;"):e}return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("form",{className:"container",onSubmit:F,children:[Object(u.jsx)("label",{children:"Search for a track:"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{className:"w-75",type:"text",placeholder:"Track name...",onChange:function(e){return l(e.target.value)},required:!0}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{className:"my-3 px-5 btn btn-success",type:"submit",children:"Search"})]}),Object(u.jsx)(g,{show:R}),k.length>0?Object(u.jsxs)("div",{className:"search-results p-4",children:[Object(u.jsx)("div",{className:"",children:Object(u.jsx)(p,{searchResults:k,setCurrentSelected:c})}),Object(u.jsx)("div",{className:"my-4",children:Object(u.jsxs)("ul",{className:"row pagination justify-content-center",children:[Object(u.jsx)("li",{className:"page-item",onClick:function(e){h(Math.max(0,d-5)),F(e)},children:Object(u.jsx)("a",{className:"btn btn-success text-white",children:" Show Last 5 "})}),Object(u.jsx)("li",{className:"px-2",children:"Don't See Your Track?"}),Object(u.jsx)("li",{className:"page-item",onClick:function(e){h(Math.max(0,d+5)),F(e)},children:Object(u.jsx)("a",{className:"btn btn-success text-white",children:"Show Next 5"})})]})})]}):f&&!R?Object(u.jsx)("h3",{className:"my-3 text-white",children:"No tracks found"}):Object(u.jsx)(u.Fragment,{})]})},C=function(){var e=Object(s.useState)(null),t=Object(m.a)(e,2),c=t[0],n=t[1],a=new URLSearchParams(Object(d.g)().search),r=Object(d.f)(),i=a.get("token");return Object(s.useEffect)((function(){i?(!function(e){y(),O.a.set(N,e)}(i),r.replace({search:""})):v()||(y(),r.replace("/"))}),[]),Object(u.jsxs)("div",{className:"container-lg py-1 text-center",children:[Object(u.jsx)("h1",{children:"Create a new Playlist!"}),Object(u.jsx)(S,{token:v(),setSelected:n}),c&&Object(u.jsx)(k,{seedIds:c,token:v()})]})},P=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,61)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),s(e),n(e),a(e),r(e)}))},R=c.p+"static/media/8-bit-heart.663f7e33.png",T=function(){return Object(u.jsxs)("footer",{className:"text-center my-5",children:[Object(u.jsx)("hr",{}),Object(u.jsxs)("p",{children:["Made with",Object(u.jsx)("img",{className:"mx-1",width:"20px",src:R})," by",Object(u.jsx)("a",{href:"https://github.com/RyanRussell00/personal-dj/blob/master/CONTRIBUTORS.md",target:"_blank",className:"mx-1",children:"Our Contributors"})]}),Object(u.jsxs)("p",{children:["This is an open source project.",Object(u.jsx)("a",{href:"https://github.com/RyanRussell00/personal-dj",className:"mx-1",children:"Contribute now!"})]}),Object(u.jsx)("small",{children:"Version 2.0 -- Now with extra cheese!"})]})},F=c(15);r.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsxs)(F.a,{children:[Object(u.jsxs)(d.c,{children:[Object(u.jsx)(d.a,{path:"/",exact:!0,children:Object(u.jsx)(b,{})}),Object(u.jsx)(d.a,{path:"/dashboard",exact:!0,children:Object(u.jsx)(C,{})})]}),Object(u.jsx)(T,{})]})}),document.getElementById("root")),P()}},[[60,1,2]]]);
//# sourceMappingURL=main.1ff06ed8.chunk.js.map